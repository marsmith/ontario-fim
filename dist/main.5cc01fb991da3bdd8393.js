!function(n){function r(r){for(var a,i,l=r[0],s=r[1],p=r[2],d=0,u=[];d<l.length;d++)i=l[d],t[i]&&u.push(t[i][0]),t[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a]);for(c&&c(r);u.length;)u.shift()();return o.push.apply(o,p||[]),e()}function e(){for(var n,r=0;r<o.length;r++){for(var e=o[r],a=!0,l=1;l<e.length;l++){var s=e[l];0!==t[s]&&(a=!1)}a&&(o.splice(r--,1),n=i(i.s=e[0]))}return n}var a={},t={0:0},o=[];function i(r){if(a[r])return a[r].exports;var e=a[r]={i:r,l:!1,exports:{}};return n[r].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=a,i.d=function(n,r,e){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:e})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var a in n)i.d(e,a,function(r){return n[r]}.bind(null,a));return e},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=r,l=l.slice();for(var p=0;p<l.length;p++)r(l[p]);var c=s;o.push([23,1]),e()}({23:function(n,r,e){"use strict";e.r(r),function(n){e(24),e(27),e(33),e(35),e(5),e(37),e(38),e(39);var r=e(0),a=e(2),t=e(6),o=e(9),i=e(10),l=e(11),s=e(12),p=e(13),c=e(14),d=e(15),u=e(16),g=e(17),m=e(18),b=e(19),f=e(20),y=e(21),h=e(22);t.c.add(o.faBars,l.faPlus,s.faMinus,i.faInfo,p.faExclamationCircle,d.faCog,c.faQuestionCircle,u.faTwitterSquare,g.faFacebookSquare,m.faGooglePlusSquare,b.faGithubSquare,f.faFlickr,y.faYoutubeSquare,h.faInstagram),t.a.searchPseudoElements=!0,t.b.watch();var v,x,w,k,z,T,S,E="./sites.json",C=[],D=[],F={url:"https://gis.usgs.gov/sciencebase2/rest/services/Catalog/5a7c9047e4b00f54eb231ae9/MapServer",visible:!1,opacity:.6},N=F.url+"/layers?f=pjson",O=F.url+"/legend?f=json";function I(){var r="Lake Elevation",e="https://waterservices.usgs.gov/nwis/iv/?format=json&parameterCd=72214&sites="+D.join(",");n.ajax({url:e,success:function(e){console.log("All NWIS results:",e),n.each(e.value.timeSeries,function(e,a){var t=a.values[0],o=a.name.split(":")[1],i=!1;if(n.each(t.qualifier,function(n,r){-1!==["Eqp","Mnt"].indexOf(r.qualifierCode)&&(i=!0,console.log("Qualifier found:",a))}),!i){var l=t.value[0].value,s=new Date(t.value[0].dateTime);s=s.toLocaleString(),z.eachLayer(function(e){if(e.properties["Site ID"]===o)if(-1!==e._popup._content.indexOf(r)){var a=e._popup._content.split('<div id="lakeElevation">')[0];(t=n("<div/>").html(a)).append('<div id="'+j(r)+'"><b>'+r+":</b>&nbsp;&nbsp<b>"+l+" </b>("+s+")</div>"),e._popup.setContent(t.html())}else{var t;(t=n("<div/>").html(e._popup._content)).append('<div id="'+j(r)+'"><b>'+r+":</b>&nbsp;&nbsp<b>"+l+" </b>("+s+")</div>"),e._popup.setContent(t.html())}})}})}})}function G(r,e,a){null===document.getElementById(a)&&n("#legend").append('<button id="'+a+'" class="btn btn-default slick-btn layerBtn equalize"><icon class="'+e+' legendicon" /><span>'+r+"</span></button>")}function j(n){return n.replace(/(?:^\w|[A-Z]|\b\w)/g,function(n,r){return 0==r?n.toLowerCase():n.toUpperCase()}).replace(/\s+/g,"")}n(document).ready(function(){console.log("Application Information: production version 0.0.1"),n("#appVersion").html("Application Information: production version 0.0.1"),r.Icon.Default.imagePath="./images/",v=Object(r.map)("mapDiv",{zoomControl:!1}),r.control.zoom({position:"topright"}).addTo(v),r.control.scale().addTo(v),x=Object(r.tileLayer)("https://clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"}).addTo(v),v.setView(["43.4","-77.0"],8),z=L.featureGroup().addTo(v),T=L.featureGroup().addTo(v),S=L.featureGroup().addTo(v),k=Object(a.b)(F),n("#baseLayerToggles").append('<div class="alert alert-secondary" role="alert">Depth layers are grouped by correlated USGS gage.  Click the Site ID below to expand a list of depth layers.  Individual depth layers can be selected and queried by clicking on the map</div>'),n.getJSON(N,function(r){n.getJSON(O,function(e){console.log("legend response:",e,"layer response:",r),n.each(r.layers,function(r,a){if("Group Layer"===a.type){console.log("Found a group layer:",a);var t=a.name.split("_").join(" ");n("#baseLayerToggles").append('<h5 class="card-title groupLayerToggle" data-toggle="collapse" data-target="#'+a.name+'"> '+t+'</h5><div id="'+a.name+'" class="collapse"></div>')}else n.each(e.layers,function(e,t){if(t.layerId===r)if(a.parentLayer)if(a.parentLayer.name,a.parentLayer.name,t.legend.length>1){var o=t.layerName.split("_"),i=o[0]+" "+(o[1]/100).toFixed(1)+" Feet",l=n("<div/>").html('<div class="ml-2"><button id="'+j("l"+t.layerName)+'" class="btn btn-default slick-btn mapLayerBtn equalize layerToggle" value="'+t.layerId+'">'+i);n.each(t.legend,function(r,e){if("-3,460 - 0"!==e.label){var a=e.label.split(" Feet")[0],t=a.split(" - "),o=t[0]/100;0!==o&&(o=">"+parseInt(o));var i=t[1]/100;n(l).append('<div class="ml-4 rasterLegend"><img alt="Legend Swatch" src="data:image/png;base64,'+e.imageData+'" /><span class="ml-2">'+o+" to "+i+" Feet</span></div>")}}),n(l).append("</button></div>"),n("#"+a.parentLayer.name).append(l)}else n("#baseLayerToggles").append('<div class="ml-2"><button id="'+j("l"+t.layerName)+'" class="btn btn-default slick-btn mapLayerBtn equalize layerToggle" value="'+t.layerId+'"><img alt="Legend Swatch" src="data:image/png;base64,'+t.legend[0].imageData+'" />'+t.layerName+" Feet</button></div>");else n("#baseLayerToggles").append('<div><button id="'+j("l"+t.layerName)+'" class="btn btn-default slick-btn mapLayerBtn equalize layerToggle" value="'+t.layerId+'"><img alt="Legend Swatch" src="data:image/png;base64,'+t.legend[0].imageData+'" />'+t.layerName+" Feet</button></div>")})}),n('[data-toggle="collapse"]').click(function(r){r.preventDefault();var e=n(this).attr("data-target");return n(e).collapse("toggle"),!1})})}),n.ajax({url:E,success:function(r){console.log("Sites data loaded:",r),n.each(r.features,function(r,e){var a="";if(n.each(e.properties,function(n,r){r.length>0&&("Site ID"===n&&(a+="<b>"+n+':</b>&nbsp;&nbsp;<a href="https://waterdata.usgs.gov/usa/nwis/uv?'+r+'" target="_blank">'+r+"</a></br>"),"Station Name"===n&&(a+="<b>"+n+":</b>&nbsp;&nbsp;"+r+"</br>"))}),"Permanant"===e.properties.type){var t="wmm-pin wmm-blue wmm-icon-circle wmm-icon-white wmm-size-25";G("Permanent Gage",t,"permGageLayer");var o=L.divIcon({className:t}),i=L.marker([e.geometry.coordinates[1],e.geometry.coordinates[0]],{icon:o});i.properties=e.properties,i.bindPopup(a),T.addLayer(i)}if("RDG"===e.properties.type){D.push(e.properties["Site ID"]);var t="wmm-pin wmm-red wmm-icon-circle wmm-icon-white wmm-size-25";G("Rapid Deployment Gage",t,"RDGgageLayer");var o=L.divIcon({className:t}),i=L.marker([e.geometry.coordinates[1],e.geometry.coordinates[0]],{icon:o});i.properties=e.properties,i.bindPopup(a),z.addLayer(i)}}),I(),setTimeout(function(){I()},3e5)}}),n(".basemapBtn").click(function(){n(".basemapBtn").removeClass("slick-btn-selection"),n(this).addClass("slick-btn-selection"),function(n){switch(n){case"Streets":n="Streets";break;case"Satellite":n="Imagery";break;case"Clarity":n="ImageryClarity";break;case"Topo":n="Topographic";break;case"Terrain":n="Terrain";break;case"Gray":n="Gray";break;case"DarkGray":n="DarkGray";break;case"NatGeo":n="NationalGeographic"}x&&v.removeLayer(x);x=Object(a.a)(n),v.addLayer(x),w&&v.removeLayer(w);"Gray"!==n&&"DarkGray"!==n&&"Imagery"!==n&&"Terrain"!==n||(w=Object(a.a)(n+"Labels"),v.addLayer(w))}(this.id.replace("btn",""))}),n("#legend").on("click",".layerBtn",function(n){!function(n){"RDGgageLayer"===n.id&&(v.hasLayer(z)?v.removeLayer(z):v.addLayer(z));"permGageLayer"===n.id&&(v.hasLayer(T)?v.removeLayer(T):v.addLayer(T))}(this)}),n("#mobile-main-menu").click(function(){n("body").toggleClass("isOpenMenu")}),n("#resetView").click(function(){resetView()}),n("#aboutButton").click(function(){n("#aboutModal").modal("show")}),n("#baseLayerToggles").on("click",".layerToggle",function(r){v.removeLayer(k),v.off("click"),n(".leaflet-container").css("cursor",""),S.clearLayers(),v.closePopup();var e=n(this).attr("value"),t=n(this).attr("id");n(".mapLayerBtn").removeClass("slick-btn-selection"),console.log("current visible layers: ",C),C==e?(console.log("map already has this layer: ",t,e),C=[],console.log("current visible layers: ",C)):(console.log("map DOES NOT have this layer: ",t,e),n(this).addClass("slick-btn-selection"),C=[e],k.setLayers(C),v.addLayer(k),-1!==t.indexOf("segment")&&(n(".leaflet-container").css("cursor","crosshair"),v.on("click",function(n){!function(n,r){S.clearLayers(),console.log("querying raster layer:",r),Object(a.c)({url:F.url}).on(v).at(n).returnGeometry(!1).layers("visible:"+r).run(function(r,e,a){console.log("identify response:",e,a);var t="";if(e.features.length>0&&"NaN"!==e.features[0].properties["Pixel Value"]){var o=a.results[0].layerName.split("_"),i="Depth "+(o[1]/100).toFixed(1)+" Feet";t+="<b>Layer queried: </b>"+i+"<br><b>Value: </b>"+(e.features[0].properties["Pixel Value"]/100).toFixed(1)+" feet"}else t+="<b>Value: </b>Not Found";var l=L.divIcon({className:"wmm-pin wmm-orange wmm-icon-noicon wmm-icon-white wmm-size-25"}),s=L.marker(n,{icon:l});L.popup().setLatLng(n).setContent(t).openOn(v);s.bindPopup(t),S.addLayer(s)})}(n.latlng,e)})),console.log("current visible layers: ",C))})})}.call(this,e(1))},35:function(n,r,e){var a=e(36);"string"==typeof a&&(a=[[n.i,a,""]]);var t={hmr:!0,transform:void 0,insertInto:void 0};e(4)(a,t);a.locals&&(n.exports=a.locals)},36:function(n,r,e){(n.exports=e(3)(!1)).push([n.i,"#loading {\r\n  background: #e9e9e9;\r\n  /* position: absolute; */\r\n  height:200px;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  opacity: 0.75;\r\n}\r\n\r\n#loading .load-text {\r\n  text-align: center;\r\n  position: relative;\r\n  top: 50%;\r\n  transform: translateY(-50%); \r\n}\r\n\r\n.tooltip-body{\r\n  width: 400px;\r\n  white-space:normal;\r\n  z-index:9999 !important;\r\n}\r\n\r\n.groupLayerToggle:hover {\r\n  cursor: pointer;\r\n}\r\n  \r\n\r\n/*\r\n    ===========================\r\n    ===========================\r\n         Navigation Bar\r\n    ===========================\r\n    ===========================\r\n*/\r\n\r\n.top-menu-btn{\r\n  background-color: transparent;\r\n  border: none;\r\n  color: rgba(255,255,255,0.5);\r\n  font-weight: 400;\r\n  text-transform: uppercase;\r\n  letter-spacing: 1.5px;\r\n  font-size: 12pt;\r\n  margin: 18px auto;\r\n  float: right;\r\n}\r\n.top-menu-btn:hover{\r\n  font-size: 12pt;\r\n  background-color: transparent;\r\n  border: none;\r\n  color: rgba(255,255,255,0.8)\r\n}\r\n.top-menu-btn:focus{\r\n  background-color: transparent;\r\n  border: none;\r\n  color: rgba(255,255,255,0.8);\r\n  font-size: 12pt;\r\n}\r\n.top-menu-btn:active{\r\n  color: rgba(255,255,255,1) !important;\r\n  background-color: transparent !important;\r\n  font-size: 12pt;\r\n  border: none;\r\n}\r\n\r\n.top-menu-brand {\r\n  padding: 14px 14px 10px;\r\n}\r\n\r\n.top-menu-brand > img {\r\n  height: 50px;\r\n}\r\n\r\n.app-name{\r\n  position: relative;\r\n  top:-2px;\r\n  font-weight:300;\r\n}\r\n\r\n.app-name {\r\nposition: relative;\r\nwidth: 100%;\r\nline-height: 70px;\r\npadding: 0 10px;\r\nfont-size: 23px;\r\ncolor: #ffffff;\r\nmargin: 0;\r\nz-index: 10;\r\n}\r\n\r\n.app-name-mobile{\r\n  position: relative;\r\n  top:-2px;\r\n  font-weight:300;\r\n}\r\n\r\n.app-name-mobile {\r\ndisplay: none;\r\nposition: relative;\r\nwidth: 100%;\r\nline-height: 72px;\r\npadding: 0 10px;\r\nfont-size: 30px;\r\ncolor: #ffffff;\r\nmargin: 0;\r\nz-index: 10;\r\n\r\n}\r\n\r\n\r\n/*\r\n  ===========================\r\n  ===========================\r\n       Map\r\n  ===========================\r\n  ===========================\r\n*/\r\nhtml, body, #mapDiv {\r\npadding: 0; \r\nmargin: 0;\r\nheight: 100%;\r\nfont-family: 'Open Sans', sans-serif;\r\n}\r\n\r\nbody {\r\npadding-top: 72px;\r\npadding-left:470px;\r\n}\r\n\r\n.leaflet-popup-content-wrapper {\r\n  border-radius: 0px;\r\n}\r\n\r\n#mapDiv > div.leaflet-control-zoom {\r\n\r\n}\r\n\r\n/*\r\n  ===========================\r\n  ===========================\r\n       Top menu\r\n  ===========================\r\n  ===========================\r\n*/\r\n\r\n#top-menu {\r\nposition: fixed;\r\ntop: 0;\r\nleft: 0;\r\nright: 0;\r\nbackground-color: #1d1d2b;\r\nz-index: 9;\r\n}\r\n\r\n#top-menu > div:not(.logo) {\r\nfloat: left;\r\n}\r\n\r\n#mobile-main-menu {\r\ndisplay: none;\r\ncursor: pointer;\r\n}\r\n\r\n#mobile-main-menu {\r\npadding: 24px 15px;\r\ncolor:white;\r\n}\r\n\r\n/************* END TOP MENU **************/\r\n\r\n\r\n\r\n/*\r\n  ===========================\r\n  ===========================\r\n       Main Menu\r\n  ===========================\r\n  ===========================\r\n*/\r\n\r\n#paramSelector > span {\r\n  margin-bottom:6px;\r\n}\r\n\r\nselect {\r\n  width:100%;\r\n}\r\n\r\n.datepicker {\r\n  border: solid #999 1px;\r\n}    \r\n\r\n#optionsPanel button {\r\n  margin-bottom:5px;\r\n  width: 100%;\r\n}\r\n\r\n#optionsPanel .card {\r\n  background-color: #ECEEF3;\r\n}\r\n\r\n.select2-selection__choice {\r\n  font-size:12px;\r\n}\r\n\r\n#legend .wmm-size-25.wmm-pin {\r\n  margin-top: -4px !important;\r\n}\r\n\r\n#legend span {\r\n  padding-left:16px;\r\n  font-size: 12px;\r\n}\r\n\r\n#layersPanel .card {\r\n  background-color: #ECEEF3;\r\n}\r\n\r\n#legend .card-text {\r\n  height: 40px;\r\n}\r\n\r\n.identification {\r\nfont-size: 14px;\r\nletter-spacing: 1.1px;\r\nbox-sizing: border-box;\r\npadding: 10px;\r\ndisplay: block;\r\ntext-align: center;\r\nopacity: .5;\r\n}\r\n\r\n#main-menu {\r\n  width: 470px;\r\n  height: calc(100% - 72px);\r\n  float: left;\r\n  /* background-color: #20202f; */\r\n  /* margin-top: 65px; */\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  transition: left .5s ease;\r\n  background-color: #ECEEF3;\r\n  min-height: 0 !important;\r\n  z-index:1001;\r\n}\r\n\r\n.disclaimer {\r\n  font-size: 13px;\r\n}\r\n\r\n.menu-content{\r\n\theight:100%\r\n}\r\n.menu-content .scrollable-content{\r\n\tdisplay: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  height: 100%;\r\n}\r\n\r\n#main-menu .main-menu-container {\r\n  position: relative;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n}\r\n\r\n#main-menu-footer {\r\n\tposition: unset;\r\n  height: auto;\r\n  overflow-y: auto;\r\n\tbox-sizing:border-box;\r\n\tpadding: 0 0 10px 0;\r\n}\r\n\r\n#main-menu .sidebar-panel {\r\nbackground-color: #ECEEF3;\r\nmargin: 0 auto;\r\nborder: none;\r\n}\r\n\r\n.card-header > svg {\r\n  float: right;\r\n}\r\n\r\n.card-header:after {\r\n  font-family: 'Font Awesome 5 Free';   \r\n  content: '\\F068';\r\n  font-weight: 900;\r\n  display:none;\r\n}\r\n.card-header.collapsed:after {\r\n  font-family: \"Font Awesome 5 Free\";\r\n  content: \"\\F067\"; \r\n  font-weight: 900;\r\n  display:none;\r\n}\r\n  \r\n#main-menu .sidebar-panel .card-title {\r\nfont-size: 10pt;\r\ntext-transform: uppercase;\r\nfont-weight: 700;\r\nletter-spacing: 1px;\r\nmargin: 6px;\r\n/* text-align: right; */\r\n}\r\n#main-menu .sidebar-panel .card-header {\r\nbox-sizing: border-box;\r\ndisplay: block;\r\nwidth: 100%;\r\npadding: 15px;\r\ncolor: #6F758E;\r\nbackground-color: #ECEEF3;\r\n}\r\n#main-menu .sidebar-panel .card-header:hover {\r\ncursor: pointer;\r\nbackground-color: rgba(255, 255, 255, 0.5);\r\ncolor: #000;\r\n}\r\n\r\n#RDGgageLayer {\r\n  padding-bottom:10px !important;\r\n}\r\n\r\n.leaflet-popup-content b {\r\n  font-weight: bolder;\r\n}\r\n\r\n.rasterLegend {\r\n\r\n  font-size: 9pt;\r\n  text-transform: uppercase;\r\n  letter-spacing: 1px;\r\n  box-sizing: border-box;\r\n  padding: 1px;\r\n  display: block;\r\n  width: 100%;\r\n  text-align: left;\r\n  color: #6F758E;\r\n  margin: 0 auto;\r\n  border-left: 4px solid transparent;\r\n}\r\n\r\n#main-menu .slick-btn {\r\nborder: none;\r\noutline: none;\r\nborder-radius: 0;\r\nfont-size: 9pt;\r\ntext-transform: uppercase;\r\nletter-spacing: 1px;\r\nbox-sizing: border-box;\r\npadding: 5px;\r\ndisplay: block;\r\nwidth: 100%;\r\ntext-align: left;\r\ncolor: #6F758E;\r\nmargin: 0 auto;\r\nborder-left: 4px solid transparent;\r\n}\r\n#main-menu .slick-btn img {\r\nheight: 25px;\r\nvertical-align: middle;\r\ndisplay: inline-block;\r\nmargin: 0 15px 0 0;\r\nborder-radius: 0;\r\nborder: none;\r\n}\r\n#main-menu .slick-btn br {\r\ndisplay: none;\r\n}\r\n\r\n#main-menu .slick-btn:hover {\r\n  transform: scale(1.05);\r\n}\r\n\r\n#baseLayerToggles .slick-btn:hover {\r\nborder-color: #333;\r\nbackground-color: rgba(236, 238, 243, 0.5);\r\n}\r\n#baseLayerToggles .slick-btn:focus {\r\nbackground-color: rgba(117, 136, 184, 0.5);\r\nborder-color: #4574CC;\r\n}\r\n\r\n#baseLayerToggles .slick-btn-selection {\r\nbackground-color: rgba(117, 136, 184, 0.5);\r\nborder-color: #4574CC !important;\r\n}\r\n\r\n.footer-links {\r\n  font-weight: 300;\r\n  letter-spacing: 1.5px;\r\n  box-sizing: border-box;\r\n  padding: 10px;\r\n  display: block;\r\n  text-align: center;\r\n  opacity: .5;\r\n  padding:3px;\r\n}\r\n\r\n.footer-links a {\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  padding: 0 4px;\r\n  font-size: 8pt;  \r\n}\r\n\r\n.footer-icons {\r\n  padding: 10px;\r\n  letter-spacing: 6px;\r\n  text-align: center;\r\n  opacity: .5;\r\n}\r\n\r\n/************* END MAIN MENU **************/\r\n\r\n/************** Mobile friendly stuff *********/\r\n\r\n@media (max-width: 767px) {\r\n  #mobile-main-menu {\r\n    display: inline-block;\r\n  }\r\n\r\n  .isOpenMenu #main-menu {\r\n    left: 0;\r\n  }\r\n\r\n  .top-menu-brand {\r\n    display:none;\r\n  }\r\n\r\n  body {\r\n    padding-left:0px;\r\n  }\r\n\r\n  #main-menu {\r\n    left: -100%;\r\n    height: calc(100% - 72px);\r\n    width: 100%;\r\n  }\r\n\r\n  .app-name {\r\n    display: none;\r\n  }\r\n\r\n  .app-name-mobile {\r\n    display: inline;\r\n    font-size:medium;\r\n  }\r\n\r\n}\r\n",""])}});